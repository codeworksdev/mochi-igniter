/*!
 * Mochi v1.2.3 (https://github.com/codeworksdev/mochi)
 * Copyright (c) 2014-2016 CODEWORKS <support@codeworksnyc.com>
 * Licensed under the MIT license
 */
function Mochi(){this._conf()._observer()._html()._init()}$(document).ready(function(t){window.$m=new Mochi}),Mochi.prototype={_conf:function(){return this.o={CLICK_D:"click",CLICK_M:"touchstart",DEF_FILENAME:"home",DEF_PAGE_NUMBER:0,DEF_VIEW_NUMBER:0},this.href=window.location.href,this.html=$("html"),this.body=$("body"),this.container=this.body.find("#container"),this.content=this.body.find("#content"),this.filename=/([^\\\/]+?)(?:\.\w+)?$/.test(this.href)?RegExp.$1:this.o.DEF_FILENAME,this},_html:function(){var t=this.o,i=this.html,n=i.attr("data-page"),e=i.attr("data-view");return/^\d+(\.\d+)?$/.test(n)||i.attr("data-page",t.DEF_PAGE_NUMBER),/^\d+(\.\d+)?$/.test(e)||i.attr("data-view",t.DEF_VIEW_NUMBER),this.body.addClass("is-page-"+(/([^\\\/]+?)(?:\.\w+)?$/.test(this.href)?RegExp.$1.replace(/\W/g,"-"):this.o.DEF_FILENAME)),this},_init:function(){return this["do"]("Mochi_init")["do"]("Mochi_Page"+this.getPage()+"_load")["do"]("Mochi_View"+this.getView()+"_load")["do"]("Mochi_last"),this},_getState:function(t,i){return window.s.pad(this.html.attr("data-"+t.toLowerCase()),i?i:0,"0")},_setState:function(t,i,n){if(/^\d+$/.test(i)&&(n||i!=this["get"+t]())){var e="data-"+t.toLowerCase(),o=this.html.attr(e),a=i;return this.html.attr(e,a),this["on"+t+"Change"](o)}return this},_onStateChange:function(t,i){return this["unload"+t](i),this["load"+t](this.html.attr("data-"+t.toLowerCase())),this},_unload:function(t,i){return/^\d+$/.test(i)&&/^\w+$/.test(t)&&this["do"]("Mochi_"+t+i+"_unload"),this},_load:function(t,i){return/^\d+$/.test(i)&&/^\w+$/.test(t)&&this["do"]("Mochi_"+t+i+"_load"),this},_observer:function(){var t=this.container.get(0),i={attributes:!0,childList:!0,characterData:!0},n=new MutationObserver(function(t){t.forEach($m.onMutation)});return n.observe(t,i),this},cache:function(t,i,n){var e=new Image(i,n);return e.src=t,e},"do":function(f){return x=this.sanitize_title(f),/^\w+$/.test(x)&&eval('if(_.isFunction(window["'+x+'"]))window["'+x+'"].call(this);'),this},getPage:function(t){return this._getState("Page",t)},getView:function(t){return this._getState("View",t)},loadPage:function(t){return this._load("Page",t)},loadView:function(t){return this._load("View",t)},onMutation:function(t){_.isFunction(window.Mochi_onMutation)&&Mochi_onMutation.call(this,t)},onPageChange:function(t){return this._onStateChange("Page",t)},onViewChange:function(t){return this._onStateChange("View",t)},unloadPage:function(t){return this._unload("Page",t)},unloadView:function(t){return this._unload("View",t)},sanitize_title:function(t,i){return t.replace(/\W/g,null==i?"_":i)},setPage:function(t,i){return this._setState("Page",t,i)},setView:function(t,i){return this._setState("View",t,i)},vClickName:function(){return this.html.hasClass("no-touchevents")?this.o.CLICK_D:this.o.CLICK_M},extend:function(k,c,f){eval("this[k] = new c(c.mochi=this)"),f&&"function"==typeof f&&f.call(this[k])},onClick:function(t,i,n){var e,o=this.vClickName(),a=_.isFunction(i),s=a?{}:i,h=a?i:n;switch(typeof t){case"string":e=$(t);break;default:e=_.isElement(t)?$(t):t}return e.on(o,null,s,h),this}};
